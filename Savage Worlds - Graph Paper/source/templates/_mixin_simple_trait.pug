mixin simple_trait(name, label, value='d4', classes='', rename=false)
  - var trait = name.toLowerCase()
  - var trait_name = rename ? `@{rename_${trait}}` : label

  .sheet-simple-trait(class=classes)
    input(type='hidden', name=`attr_${trait}_extra_wd_roll`, value='-10000')

    input.sheet-simple-trait__expand(type='checkbox',
                                     name=`attr_expand_simple_${trait}`)

    .sheet-background

    - // Roll without RoF query
    button(type='roll',
           name=`roll_simple_${trait}`,
           value!=`&{template:TraitRoll} {{header=@{name} ^{rolls} ${trait_name}}} {{trait=${trait_name}}} {{traitdie=@{${trait}}}} {{flat=@{${trait}_mod}}} {{wounds=[[ @{wound_mod} ]]}} {{fatigue=[[ @{fatigue_mod} ]]}} {{rof=[[ 1 ]]}} {{modifier=?{@{query_modifier}|0}}} {{wd=@{${trait}_wd}}} ${maxRof.map(n => `{{traitroll${n}=[[ @{${trait}_roll} @{${trait}_mod} - @{fatigue_mod} - @{wound_mod} + ?{@{query_modifier}|0} ]]}}`).join(' ')} {{wdroll=[[ @{${trait}_extra_wd_roll} @{${trait}_mod} - @{fatigue_mod} - @{wound_mod} + ?{@{query_modifier}|0} ]]}} {{reroll=[r](~simple_${trait})}}`,
           class='sheet-simple-trait__roll')
      if rename
        span(name=`attr_rename_${trait}`)!= label
      else
        span(data-i18n=trait)!= label

    if trait != 'unskilled'
      .sheet-simple-trait__buttons
        - var rolls = ['d4', 'd6', 'd8', 'd10', 'd12']

        each roll in rolls
          - // Roll with RoF query
          button(type='roll',
                 name=`roll_simple_${trait}_${roll}`,
                 value!=`&{template:TraitRoll} {{header=@{name} ^{rolls} ${trait_name}}} {{trait=${trait_name}}} {{traitdie=${roll}}} {{flat=@{${trait}_mod}}} {{wounds=[[ @{wound_mod} ]]}} {{fatigue=[[ @{fatigue_mod} ]]}} {{rof=[[ ?{@{query_rate_of_fire}|@{${trait}_rof}} ]]}} {{modifier=?{@{query_modifier}|0}}} {{wd=@{${trait}_wd}}} ${maxRof.map(n => `{{traitroll${n}=[[ ${roll}!cs2 @{${trait}_mod} - @{fatigue_mod} - @{wound_mod} + ?{@{query_modifier}|0} ]]}}`).join(' ')} {{wdroll=[[ @{${trait}_extra_wd_roll} @{${trait}_mod} - @{fatigue_mod} - @{wound_mod} + ?{@{query_modifier}|0} ]]}} {{reroll=[r](~simple_${trait}_${roll})}}`,
                 class='sheet-simple-trait__custom-roll')= roll

    span.sheet-simple-trait__label(name=`attr_${trait}_code`)= value

    .sheet-simple-trait__inputs
      input(type='text',
            name=`attr_${trait}`,
            placeholder='d4',
            value=value,
            spellcheck='false')

      input(type='text',
            name=`attr_${trait}_mod`,
            placeholder='+/âˆ’',
            data-i18n-placeholder='extra-trait-mod-placeholder',
            spellcheck='false')

      input(type='text',
            name=`attr_${trait}_wd`,
            placeholder='WD',
            data-i18n-placeholder='extra-trait-wd-placeholder',
            spellcheck='false')
